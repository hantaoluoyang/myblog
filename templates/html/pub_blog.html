{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>myblog</title>
    <link rel="stylesheet" href="{% static 'bootstrap5/bootstrap.min.css' %}">
    <script src="{% static 'bootstrap5/popper.min.js' %}"></script>
    <script src="{% static 'bootstrap5/bootstrap.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <!--引入css和js-->
    <link href="https://cdn.bootcdn.net/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
    <link href="https://unpkg.com/@wangeditor/editor@latest/dist/css/style.css" rel="stylesheet">
    <link href="{% static 'wangeditor/layout.css' %}" rel="stylesheet">
    <script src="{% static 'wangeditor/custom.js' %}"></script>
</head>
<body>
<!--设置底部的外边距-->
<header class="p-3 text-bg-light border-bottom mb-3">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <img src="{% static 'image/logo.png' %}" alt="" height="40">
            </a>
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><a href="#" class="nav-link px-2 text-secondary">首页</a></li>
                <li><a href="#" class="nav-link px-2 text-white">发布博客</a></li>
                <li><a href="#" class="nav-link px-2 text-white">浏览</a></li>
                <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
                <li><a href="#" class="nav-link px-2 text-white">资讯</a></li>
            </ul>
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
                <input type="search" class="form-control" placeholder="搜索..." aria-label="Search">
            </form>
            <div class="text-end">
                <button type="button" class="btn btn-outline-primary me-2">登录</button>
                <button type="button" class="btn btn-primary">注册</button>
            </div>
        </div>
    </div>
</header>
<!--设置内边距-->
<main class="container bg-white p-3 rounded">
    <h1>发布博客</h1>
    <div class="mt-3">
        <form action="" method="POST">
            <div class="mt-3">
                <labe class="form-label">标题</labe>
                <input type="text" name="title" class="form-control">
            </div>

            <div class="mt-3">
                <labe class="form-label">分类</labe>
                <select name="category" class="form-select">
                    <option value="1">Python</option>
                    <option value="2">Go</option>
                    <option value="3">CSS</option>
                    <option value="4">C++</option>
                    <option value="5">Java</option>
                </select>
            </div>

            <div class="mb-3">
                <div class="mt-3">
                    内容
                </div>
                <div class="page-container">
                    <div class="page-left">
                        <demo-menu></demo-menu>
                    </div>
                    <div class="page-right">
                        <!-- 编辑器 DOM -->
                        <div style="border: 1px solid #ccc;">
                            <div id="editor-toolbar" style="border-bottom: 1px solid #ccc;"></div>
                            <div id="editor-text-area" style="height: 500px"></div>
                        </div>

                        <!-- 内容状态 -->
                        <p style="background-color: #f1f1f1;">
                            Text length: <span id="total-length"></span>；
                            Selected text length: <span id="selected-length"></span>；
                        </p>
                    </div>
                </div>

                <!-- <script src="https://cdn.jsdelivr.net/npm/@wangeditor/editor@latest/dist/index.min.js"></script> -->
                <script src="https://unpkg.com/@wangeditor/editor@latest/dist/index.js"></script>
                <script>
                    const E = window.wangEditor

                    // 切换语言
                    const LANG = location.href.indexOf('lang=en') > 0 ? 'en' : 'zh-CN'
                    E.i18nChangeLanguage(LANG)

                    window.editor = E.createEditor({
                        selector: '#editor-text-area',
                        html: '<p><br></p>',
                        config: {
                            placeholder: 'Type here...',
                            MENU_CONF: {
                                uploadImage: {
                                    fieldName: 'your-fileName',
                                    base64LimitSize: 10 * 1024 * 1024 // 10M 以下插入 base64
                                }
                            },
                            onChange(editor) {
                                console.log(editor.getHtml())

                                // 选中文字
                                const selectionText = editor.getSelectionText()
                                document.getElementById('selected-length').innerHTML = selectionText.length
                                // 全部文字
                                const text = editor.getText().replace(/\n|\r/mg, '')
                                document.getElementById('total-length').innerHTML = text.length
                            }
                        }
                    })

                    window.toolbar = E.createToolbar({
                        editor,
                        selector: '#editor-toolbar',
                        config: {}
                    })
                </script>
            </div>
            
            <!--提交按钮-->
            <div class="mb-3 text-end">
                <button class="btn btn-primary">发布</button>
            </div>


        </form>
    </div>
</main>
</body>
</html>